"use strict";(self.webpackChunkpaydock_integration_guides=self.webpackChunkpaydock_integration_guides||[]).push([[572],{9033:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>o});var a=t(5893),r=t(1151);const s={title:"Direct Charge"},c=void 0,i={id:"integration-flows/direct-charge",title:"Direct Charge",description:"Credit Card (No Stored Details)",source:"@site/docs/integration-flows/direct-charge.md",sourceDirName:"integration-flows",slug:"/integration-flows/direct-charge",permalink:"/integration-guides/integration-flows/direct-charge",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Direct Charge"},sidebar:"docsSidebar",previous:{title:"Direct Charge With 3ds",permalink:"/integration-guides/integration-flows/direct-charge-3ds"},next:{title:"Paydock Integration",permalink:"/integration-guides/"}},d={},o=[{value:"Credit Card (No Stored Details)",id:"credit-card-no-stored-details",level:2},{value:"Create a \u201cSimple Widget\u201d using the Paydock Client-SDK",id:"create-a-simple-widget-using-the-paydock-client-sdk",level:3},{value:"Create a session vault token",id:"create-a-session-vault-token",level:3},{value:"Create charge using the session vault token",id:"create-charge-using-the-session-vault-token",level:3},{value:"Credit Card (stored details)",id:"credit-card-stored-details",level:2},{value:"Create a \u201cSimple Widget\u201d using the Paydock Client-SDK",id:"create-a-simple-widget-using-the-paydock-client-sdk-1",level:3},{value:"Create a permanent vault token",id:"create-a-permanent-vault-token",level:3},{value:"Create charge using the permanent vault token",id:"create-charge-using-the-permanent-vault-token",level:3},{value:"Create the Customer",id:"create-the-customer",level:3}];function l(e){const n={code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"credit-card-no-stored-details",children:"Credit Card (No Stored Details)"}),"\n",(0,a.jsx)(n.h3,{id:"create-a-simple-widget-using-the-paydock-client-sdk",children:"Create a \u201cSimple Widget\u201d using the Paydock Client-SDK"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:'<form id="paymentForm">\n    <div id="widget"></div>\n    <input name="payment_source_token" id="payment_source_token" type="hidden">\n</form>\n<script src="https://widget.paydock.com/sdk/latest/widget.umd.min.js"><\/script>\n<script>\n    var widget = new paydock.HtmlWidget(\'#widget\', \'publicKey\');\n    widget.onFinishInsert(\'input[name="payment_source_token"]\', \'payment_source\');\n    widget.load();\n<\/script>\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Example banner",src:t(2451).Z+"",width:"1332",height:"450"})}),"\n",(0,a.jsx)(n.h3,{id:"create-a-session-vault-token",children:"Create a session vault token"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Take the one time token from the ",(0,a.jsx)(n.code,{children:"payment_source_token"})," field and create a session vault token"]}),"\n",(0,a.jsx)(n.li,{children:"Session vault token request"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:'POST /v1/vault/payment_sources HTTP/1.1\nHost: api.paydock.com\nx-user-public-key: {{public-key}}\nContent-Type: application/json\n\n{\n    "token": "6311c15f-8024-42f9-8ed5-200621ecfb1d",\n    "vault_type": "session"\n}\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:"Session vault response"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "status": 201,\n    "error": null,\n    "resource": {\n        "type": "payment_source",\n        "data": {\n            "type": "card",\n            "_source_ip_address": "x.x.x.x",\n            "vault_type": "session",\n            "expire_month": 12,\n            "expire_year": 2023,\n            "card_name": "John Smith",\n            "card_scheme": "visa",\n            "card_number_last4": "4242",\n            "card_number_bin": "42424242",\n            "ref_token": "9653863864182813",\n            "status": "active",\n            "created_at": "2023-11-01T00:13:22.084Z",\n            "company_id": "65235992df412413b29a8f3b",\n            "vault_token": "996280fe-961c-4f84-9e99-e490402c48b1",\n            "updated_at": "2023-11-01T00:13:59.412Z"\n        }\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"create-charge-using-the-session-vault-token",children:"Create charge using the session vault token"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Using the ",(0,a.jsx)(n.code,{children:"resource.data.vault_token"}),". Create a charge request"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:'POST /v1/charges HTTP/1.1\nHost: api.paydock.com\nx-user-public-key: {{public-key}}\nContent-Type: application/json\n\n{\n    "amount": "10.00",\n    "currency": "AUD",\n    "customer": {\n        "payment_source": {\n            "vault_token": "996280fe-961c-4f84-9e99-e490402c48b1"\n        }\n    }\n}\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"Sample charge response"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "status": 201,\n    "error": null,\n    "resource": {\n        "type": "charge",\n        "data": {\n            "transfer": {\n                "items": []\n            },\n            "schedule": {\n                "stopped": false\n            },\n            "statistics": {\n                "total_refunded_amount": 0,\n                "full_refund": false,\n                "need_sync": true\n            },\n            "customer": {\n                "payment_source": {\n                    "type": "card",\n                    "card_name": "John Smith",\n                    "card_number_last4": "4242",\n                    "expire_month": 12,\n                    "expire_year": 2023,\n                    "gateway_id": "65235b464771c64d6774b38d",\n                    "vault_token": "996280fe-961c-4f84-9e99-e490402c48b1",\n                    "card_scheme": "visa",\n                    "card_number_bin": "42424242",\n                    "gateway_name": "MasterCard",\n                    "gateway_type": "MasterCard",\n                    "items": []\n                }\n            },\n            "type": "financial",\n            "status": "complete",\n            "capture": true,\n            "authorization": false,\n            "archived": false,\n            "one_off": true,\n            "_source_ip_address": "220.233.78.99",\n            "_id": "65419867a0fe8fc32471b224",\n            "company_id": "65235992df412413b29a8f3b",\n            "amount": 13,\n            "currency": "AUD",\n            "items": [],\n            "transactions": [\n                {\n                    "type": "sale",\n                    "status": "complete",\n                    "_source_ip_address": "220.233.78.99",\n                    "gateway_specific_code": null,\n                    "gateway_specific_description": null,\n                    "error_message": null,\n                    "error_code": null,\n                    "status_code": null,\n                    "status_code_description": null,\n                    "include_authorization": false,\n                    "_id": "65419867a0fe8fc32471b225",\n                    "created_at": "2023-11-01T00:14:31.103Z",\n                    "amount": 13,\n                    "currency": "AUD",\n                    "amount_fee": null,\n                    "amount_surcharge": null,\n                    "amount_original": null,\n                    "external_id": "03533287-b922-4508-8d80-a3d1e46f37d7:de9ecbe8-4725-486c-a2b6-2bf8214d8134",\n                    "external_reference": "330500102771",\n                    "processed_at": "2023-11-01T00:14:32.336Z"\n                }\n            ],\n            "amount_surcharge": null,\n            "amount_original": null,\n            "updated_at": "2023-11-01T00:14:32.336Z",\n            "created_at": "2023-11-01T00:14:31.107Z",\n            "__v": 0,\n            "external_id": "03533287-b922-4508-8d80-a3d1e46f37d7:de9ecbe8-4725-486c-a2b6-2bf8214d8134"\n        }\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"credit-card-stored-details",children:"Credit Card (stored details)"}),"\n",(0,a.jsx)(n.h3,{id:"create-a-simple-widget-using-the-paydock-client-sdk-1",children:"Create a \u201cSimple Widget\u201d using the Paydock Client-SDK"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:'<form id="paymentForm">\n    <div id="widget"></div>\n    <input name="payment_source_token" id="payment_source_token" type="hidden">\n</form>\n<script src="https://widget.paydock.com/sdk/latest/widget.umd.min.js"><\/script>\n<script>\n    var widget = new paydock.HtmlWidget(\'#widget\', \'publicKey\');\n    widget.onFinishInsert(\'input[name="payment_source_token"]\', \'payment_source\');\n    widget.load();\n<\/script>\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Example banner",src:t(2451).Z+"",width:"1332",height:"450"})}),"\n",(0,a.jsx)(n.h3,{id:"create-a-permanent-vault-token",children:"Create a permanent vault token"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Take the one time token from the ",(0,a.jsx)(n.code,{children:"payment_source_token"})," field and create a permanent vault token"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Permanent vault token request"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:'POST /v1/vault/payment_sources HTTP/1.1\nHost: api.paydock.com\nx-user-public-key: {{public-key}}\nContent-Type: application/json\n{\n    "token": "6311c15f-8024-42f9-8ed5-200621ecfb1d"\n}\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:"Permanent vault response"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "status": 201,\n    "error": null,\n    "resource": {\n        "type": "payment_source",\n        "data": {\n            "type": "card",\n            "_source_ip_address": "x.x.x.x",\n            "vault_type": "permanent",\n            "expire_month": 1,\n            "expire_year": 2039,\n            "card_name": "Wanda Mertz",\n            "card_scheme": "mastercard",\n            "card_number_last4": "0008",\n            "card_number_bin": "51234500",\n            "ref_token": "9139516499300184",\n            "status": "active",\n            "created_at": "2023-11-02T02:13:09.832Z",\n            "company_id": "65235992df412413b29a8f3b",\n            "vault_token": "3dc68807-d6d9-44bc-89a3-4cd922131b01",\n            "updated_at": "2023-11-02T02:13:27.960Z"\n        }\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"create-charge-using-the-permanent-vault-token",children:"Create charge using the permanent vault token"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Using the ",(0,a.jsx)(n.code,{children:"resource.data.vault_token"}),". Create a charge request"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:'POST /v1/charges HTTP/1.1\nHost: api.paydock.com\nx-user-public-key: {{public-key}}\nContent-Type: application/json\n\n{\n    "amount": "10.00",\n    "currency": "AUD",\n    "customer": {\n        "payment_source": {\n            "vault_token": "3dc68807-d6d9-44bc-89a3-4cd922131b01"\n        }\n    }\n}\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"Sample charge response"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "status": 201,\n    "error": null,\n    "resource": {\n        "type": "charge",\n        "data": {\n            "transfer": {\n                "items": []\n            },\n            "schedule": {\n                "stopped": false\n            },\n            "statistics": {\n                "total_refunded_amount": 0,\n                "full_refund": false,\n                "need_sync": true\n            },\n            "customer": {\n                "payment_source": {\n                    "type": "card",\n                    "card_name": "John Smith",\n                    "card_number_last4": "4242",\n                    "expire_month": 12,\n                    "expire_year": 2023,\n                    "gateway_id": "65235b464771c64d6774b38d",\n                    "vault_token": "996280fe-961c-4f84-9e99-e490402c48b1",\n                    "card_scheme": "visa",\n                    "card_number_bin": "42424242",\n                    "gateway_name": "MasterCard",\n                    "gateway_type": "MasterCard",\n                    "items": []\n                }\n            },\n            "type": "financial",\n            "status": "complete",\n            "capture": true,\n            "authorization": false,\n            "archived": false,\n            "one_off": true,\n            "_source_ip_address": "220.233.78.99",\n            "_id": "65419867a0fe8fc32471b224",\n            "company_id": "65235992df412413b29a8f3b",\n            "amount": 13,\n            "currency": "AUD",\n            "items": [],\n            "transactions": [\n                {\n                    "type": "sale",\n                    "status": "complete",\n                    "_source_ip_address": "220.233.78.99",\n                    "gateway_specific_code": null,\n                    "gateway_specific_description": null,\n                    "error_message": null,\n                    "error_code": null,\n                    "status_code": null,\n                    "status_code_description": null,\n                    "include_authorization": false,\n                    "_id": "65419867a0fe8fc32471b225",\n                    "created_at": "2023-11-01T00:14:31.103Z",\n                    "amount": 13,\n                    "currency": "AUD",\n                    "amount_fee": null,\n                    "amount_surcharge": null,\n                    "amount_original": null,\n                    "external_id": "03533287-b922-4508-8d80-a3d1e46f37d7:de9ecbe8-4725-486c-a2b6-2bf8214d8134",\n                    "external_reference": "330500102771",\n                    "processed_at": "2023-11-01T00:14:32.336Z"\n                }\n            ],\n            "amount_surcharge": null,\n            "amount_original": null,\n            "updated_at": "2023-11-01T00:14:32.336Z",\n            "created_at": "2023-11-01T00:14:31.107Z",\n            "__v": 0,\n            "external_id": "03533287-b922-4508-8d80-a3d1e46f37d7:de9ecbe8-4725-486c-a2b6-2bf8214d8134"\n        }\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"create-the-customer",children:"Create the Customer"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Using the permanent vault token created earlier along with the customer details"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:'POST /v1/customers HTTP/1.1\nHost: api.paydock.com\nx-user-public-key: {{public-key}}\nContent-Type: application/json\n\n{\n    "first_name": "John",\n    "last_name": "Smith",\n    "email": "johnsmith@paydock.com",\n    "phone": "+61413444444",\n    "payment_source": {\n        "vault_token": "3dc68807-d6d9-44bc-89a3-4cd922131b01"\n    }\n}\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"Sample response from creating the customer"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "status": 201,\n    "error": null,\n    "resource": {\n        "type": "customer",\n        "data": {\n            "_id": "654306419a90eda1ebc4be73",\n            "_source_ip_address": "x.x.x.x",\n            "first_name": "John",\n            "last_name": "Smith",\n            "email": "johnsmith@paydock.com",\n            "phone": "+61413444444",\n            "default_source": "654306419a90eda1ebc4be76",\n            "status": "active",\n            "archived": false,\n            "created_at": "2023-11-02T02:15:29.267Z",\n            "updated_at": "2023-11-02T02:15:29.315Z",\n            "_check_expire_date": false,\n            "statistics": {\n                "successful_transactions": 0,\n                "total_collected_amount": 0\n            },\n            "payment_sources": [\n                {\n                    "_id": "654306419a90eda1ebc4be76",\n                    "type": "card",\n                    "vault_token": "3dc68807-d6d9-44bc-89a3-4cd922131b01",\n                    "card_name": "Wanda Mertz",\n                    "card_number_bin": "51234500",\n                    "card_number_last4": "0008",\n                    "card_scheme": "mastercard",\n                    "expire_month": 1,\n                    "expire_year": 2039,\n                    "status": "active",\n                    "created_at": "2023-11-02T02:15:29.288Z",\n                    "updated_at": "2023-11-02T02:15:29.288Z"\n                }\n            ],\n            "payment_destinations": [],\n            "company_id": "65235992df412413b29a8f3b"\n        }\n    }\n}\n'})})]})}function u(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},2451:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/card-details-form-9427c456bf220ecd2220f78c5c9bd2ad.png"},1151:(e,n,t)=>{t.d(n,{Z:()=>i,a:()=>c});var a=t(7294);const r={},s=a.createContext(r);function c(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);